<div
  class="fixed inset-0 bg-black bg-opacity-50 grid place-items-center"
  (click)="onBackdropClick($event)"
>
  <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md grid gap-4">
    <div class="grid grid-cols-[1fr_auto] items-center">
      <h2 class="text-xl font-medium text-gray-900">
        {{ formatDate(selectedDate(), "yyyy年MM月dd日(E)") }}
      </h2>
      @if (editingSchedule()) {
      <button
        type="button"
        (click)="onDelete()"
        class="text-red-500 hover:text-red-700"
      >
        削除
      </button>
      }
    </div>
    <form (submit)="onSubmit($event)" class="grid gap-4">
      <div class="grid gap-1">
        <label class="text-sm font-medium text-gray-700">タイトル</label>
        <input
          type="text"
          [(ngModel)]="title"
          name="title"
          class="rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          required
        />
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div class="grid gap-1">
          <label class="text-sm font-medium text-gray-700">開始日時</label>
          <input
            type="datetime-local"
            [(ngModel)]="startDate"
            name="startDate"
            class="rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
            required
          />
        </div>
        <div class="grid gap-1">
          <label class="text-sm font-medium text-gray-700">終了日時</label>
          <input
            type="datetime-local"
            [(ngModel)]="endDate"
            name="endDate"
            class="rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
            required
          />
        </div>
      </div>
      <div class="grid gap-1">
        <label class="text-sm font-medium text-gray-700">詳細</label>
        <textarea
          [(ngModel)]="description"
          name="description"
          rows="3"
          class="rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
        ></textarea>
      </div>
      <div class="grid grid-cols-2 gap-2">
        <button
          type="button"
          (click)="closeModal.emit()"
          class="px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200"
        >
          キャンセル
        </button>
        <button
          type="submit"
          class="px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600"
        >
          {{ editingSchedule() ? "更新" : "保存" }}
        </button>
      </div>
    </form>
  </div>
</div>
